/*
 *  jQuery NodeTree - v2.0.0
 *  A nested Checkbox Tree with Indeterminate prop and clean visual styles.
 *  http://jqueryboilerplate.com
 *
 *  Made by Harley Jessop
 *  Under MIT License
 */
!function(a){function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="nodetree",d={treeSelector:".nt",nodeSelector:".nt__node",branchSelector:".nt__branch",checkAllSelector:".nt__check-all",uncheckAllSelector:".nt__uncheck-all",chopAllSelector:".nt__chop-all",growAllSelector:".nt__grow-all",growingClass:"nt__node--growing",checkedClass:"nt__node--checked",indeterminateClass:"nt__node--indeterminate",iconSelector:".fa",growIconClass:"fa-plus-square-o",chopIconClass:"fa-minus-square-o",nodeInputSelector:".nt__node__input",nodeDepth:".greatgrandchild"};b.prototype={init:function(){var b=this,c=this.settings,d=this.element;a(c.nodeInputSelector).on("click",function(a){a.stopPropagation()}),a(d).on("click",c.nodeSelector,function(){a(this).siblings(c.branchSelector).length&&(a(this).toggleClass(c.growingClass),b.toggleIcon(a(this)))}),a(d).on("click",c.checkAllSelector,function(){a(d).find(":checkbox").prop({checked:"checked",indeterminate:!1}).trigger("change"),b.colorCoded()}).on("click",c.uncheckAllSelector,function(){a(d).find(":checkbox").removeAttr("checked").trigger("change"),b.colorCoded()}).on("click",c.growAllSelector,function(){a(d).find(c.nodeSelector).each(function(){a(this).siblings(c.branchSelector).length&&(a(this).addClass(c.growingClass),b.toggleIcon(a(this)))})}).on("click",c.chopAllSelector,function(){a(d).find(c.nodeSelector).each(function(){a(this).removeClass(c.growingClass),b.toggleIcon(a(this))})}),a(d).on("change",":checkbox",function(d){d.stopPropagation();var e,f=a(this).prop("checked"),g=a(this.parentNode.parentNode.parentNode);e=a(g).find(":checkbox").not(a(c.checkedClass+" :checked")),e.prop({indeterminate:!1,checked:f}),b.colorCoded(this),b.colorCoded(e),b.checkSiblings(g,f)}),b.checkSiblings(a(c.nodeDepth+" :checked").closest("li"),!0)},colorCoded:function(b){var c=this.settings;a(b).each(function(){a(this).closest(c.nodeSelector).toggleClass(c.checkedClass,a(b).is(":checked")).toggleClass(c.indeterminateClass,a(b).prop("indeterminate")===!0)})},toggleIcon:function(a){var b=this.settings;a.hasClass(b.growingClass)?a.find(b.iconSelector).removeClass(b.growIconClass).addClass(b.chopIconClass):a.find(b.iconSelector).removeClass(b.chopIconClass).addClass(b.growIconClass)},checkSiblings:function(b,c){if(b.length){var d,e=this,f=this.settings,g=b.parent().parent(),h=!0;d=g.children(f.nodeSelector).find(":checkbox"),console.log(d),b.siblings().not(".empty").each(function(){return h=a(this).find(":checkbox").prop("checked")===c}),h&&c?(a(":checkbox",g).prop({indeterminate:!1,checked:c}),e.colorCoded(d),e.checkSiblings(g,c)):h&&!c?(d.prop("checked",c),d.prop("indeterminate",g.find(":checked").length),e.colorCoded(d),e.checkSiblings(g,c)):(b.parents("li").children(f.nodeSelector).find(":checkbox").prop({indeterminate:!0,checked:!1}),e.colorCoded(b.parents("li").children(f.nodeSelector).find(":checkbox")))}}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))}),this}}(jQuery,window,document);